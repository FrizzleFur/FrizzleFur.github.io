<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Git 笔记系列（三）—— Git常用命令-一览"><meta name="keywords" content="Git"><meta name="author" content="FrizzleFur"><meta name="copyright" content="FrizzleFur"><title>Git 笔记系列（三）—— Git常用命令-一览 | FFur</title><link rel="shortcut icon" href="/images/my-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.5.6"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css?version=1.5.6"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><link rel="manifest" href="/manifest.json"><link rel="manifest" href="/manifest.json"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#目录"><span class="toc-number">1.</span> <span class="toc-text">目录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#命令"><span class="toc-number">1.1.</span> <span class="toc-text">命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Git-命令图解"><span class="toc-number">2.</span> <span class="toc-text">Git 命令图解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#初始化"><span class="toc-number">2.0.1.</span> <span class="toc-text">初始化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#操作"><span class="toc-number">2.0.2.</span> <span class="toc-text">操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#撤销操作"><span class="toc-number">2.0.2.1.</span> <span class="toc-text">撤销操作</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分支"><span class="toc-number">2.0.3.</span> <span class="toc-text">分支</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#冲突处理"><span class="toc-number">2.0.3.1.</span> <span class="toc-text">冲突处理</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#git-reset"><span class="toc-number">2.0.4.</span> <span class="toc-text">git reset</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#git-reflog"><span class="toc-number">2.0.5.</span> <span class="toc-text">git reflog</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#git-remote"><span class="toc-number">2.0.6.</span> <span class="toc-text">git remote</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#git-grep查找"><span class="toc-number">2.0.7.</span> <span class="toc-text">git grep查找</span></a></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#Git-其他常用命令"><span class="toc-number">3.</span> <span class="toc-text">Git 其他常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Git-undo撤销方法"><span class="toc-number">3.1.</span> <span class="toc-text">Git undo撤销方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Git-Merge"><span class="toc-number">3.2.</span> <span class="toc-text">Git Merge</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Git-log"><span class="toc-number">3.3.</span> <span class="toc-text">Git log</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Git-diff"><span class="toc-number">3.4.</span> <span class="toc-text">Git diff</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Git-比较不同版本文件差异的常用命令格式："><span class="toc-number">3.4.1.</span> <span class="toc-text">Git 比较不同版本文件差异的常用命令格式：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Git-config"><span class="toc-number">3.5.</span> <span class="toc-text">Git config</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#设置git命令-别名"><span class="toc-number">3.5.1.</span> <span class="toc-text">设置git命令 别名</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Git命令的别名"><span class="toc-number">3.5.1.1.</span> <span class="toc-text">Git命令的别名</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#同一台电脑可以有2个git账号（不同网站的）"><span class="toc-number">3.5.2.</span> <span class="toc-text">同一台电脑可以有2个git账号（不同网站的）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他"><span class="toc-number">3.6.</span> <span class="toc-text">其他</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常见命令菜单"><span class="toc-number">3.7.</span> <span class="toc-text">常见命令菜单</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Git-Cheat-Sheet-Part1"><span class="toc-number">3.7.1.</span> <span class="toc-text">Git Cheat Sheet Part1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Git-Cheet-Sheet-Part2"><span class="toc-number">3.7.2.</span> <span class="toc-text">Git Cheet Sheet Part2</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考"><span class="toc-number">4.</span> <span class="toc-text">参考</span></a></li></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://pic-mike.oss-cn-hongkong.aliyuncs.com/Blog/avatar.png"></div><div class="author-info__name text-center">FrizzleFur</div><div class="author-info__description text-center">stay on your way</div><div class="follow-button"><a href="https://github.com/FrizzleFur">Follow me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">40</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">15</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="https://juejin.im/user/57f8ffda2e958a005581e3c0/posts">J_Knight</a><a class="author-info-links__name text-center" href="https://halfrost.com/">Halfrost</a><a class="author-info-links__name text-center" href="https://github.com/draveness/analyze">draveness</a><a class="author-info-links__name text-center" href="https://juejin.im/user/5a52075e6fb9a01c9d31b107/posts">老司机周报</a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">FFur</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/ideas">思所</a><a class="site-page" href="/booknotes">读书</a><a class="site-page" href="/gallery">相册</a><a class="site-page" href="/about">关于</a></span></div><div id="post-info"><div id="post-title">Git 笔记系列（三）—— Git常用命令-一览</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-02-28</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><table>
<thead>
<tr>
<th>时间</th>
<th>更新备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>2018-02-28</td>
<td>新建文章</td>
</tr>
<tr>
<td>2018-06-08</td>
<td>整理补充</td>
</tr>
</tbody>
</table>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li><a href="http://frizzlefur.com/Git%20%E7%AC%94%E8%AE%B0%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%20Git%E7%AE%80%E4%BB%8B.html">Git 笔记系列（一）—— Git简介</a></li>
<li><a href="http://frizzlefur.com/Git%20%E7%AC%94%E8%AE%B0%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%8C%EF%BC%89%E2%80%94%E2%80%94%20Git%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.html">Git 笔记系列（二）—— Git工作流程</a></li>
<li><a href="http://frizzlefur.com/Git%20%E7%AC%94%E8%AE%B0%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%89%EF%BC%89%E2%80%94%E2%80%94%20Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-%E4%B8%80%E8%A7%88.html"><strong>Git 笔记系列（三）—— Git常用命令-一览</strong></a></li>
<li><a href="http://frizzlefur.com/Git%20%E7%AC%94%E8%AE%B0%E7%B3%BB%E5%88%97%EF%BC%88%E5%9B%9B%EF%BC%89%E2%80%94%E2%80%94%20Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-Checkout.html">Git 笔记系列（四）—— Git常用命令-Checkout</a></li>
<li><a href="http://frizzlefur.com/Git%20%E7%AC%94%E8%AE%B0%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%94%EF%BC%89%E2%80%94%E2%80%94%20Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-Branch.html">Git 笔记系列（五）—— Git常用命令-Branch</a></li>
<li><a href="http://frizzlefur.com/Git%20%E7%AC%94%E8%AE%B0%E7%B3%BB%E5%88%97%EF%BC%88%E5%85%AD%EF%BC%89%E2%80%94%E2%80%94%20Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-Reset.html">Git 笔记系列（六）—— Git常用命令-Reset</a></li>
<li><a href="http://frizzlefur.com/Git%20%E7%AC%94%E8%AE%B0%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%83%EF%BC%89%E2%80%94%E2%80%94%20Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-Rebase.html">Git 笔记系列（七）—— Git常用命令-Rebase</a></li>
<li><a href="http://frizzlefur.com/Git%20%E7%AC%94%E8%AE%B0%E7%B3%BB%E5%88%97%EF%BC%88%E5%85%AB%EF%BC%89%E2%80%94%E2%80%94%20Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-Stash.html">Git 笔记系列（八）—— Git常用命令-Stash等</a></li>
<li><a href="http://frizzlefur.com/Git%20%E7%AC%94%E8%AE%B0%E7%B3%BB%E5%88%97%EF%BC%88%E4%B9%9D%EF%BC%89%E2%80%94%E2%80%94%20Git%E8%BF%9B%E9%98%B6.html">Git 笔记系列（九）—— Git进阶</a></li>
</ul>
<h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><p><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/15198227186003.jpg" alt=""></p>
<ul>
<li>workspace: 本地的工作目录。（记作A）</li>
<li>index：缓存区域，临时保存本地改动。（记作B）</li>
<li>local repository: 本地仓库，只想最后一次提交HEAD。（记作C）</li>
<li>remote repository：远程仓库。（记作D）<br>以下所有的命令的功能说明，都采用上述的标记的A、B、C、D的方式来阐述。</li>
</ul>
<a id="more"></a>
<h2 id="Git-命令图解"><a href="#Git-命令图解" class="headerlink" title="Git 命令图解"></a>Git 命令图解</h2><p><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/15282773825752.jpg" alt=""></p>
<h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git init //创建</span><br><span class="line">git clone /path/to/repository //检出</span><br><span class="line">git config --global user.email &quot;you@example.com&quot; //配置email</span><br><span class="line">git config --global user.name &quot;Name&quot; //配置用户名</span><br></pre></td></tr></table></figure>
<h4 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">git add &lt;file&gt; // 文件添加，A → B</span><br><span class="line">git add . // 所有文件添加，A → B</span><br><span class="line">git commit -m &quot;代码提交信息&quot; //文件提交，B → C</span><br><span class="line">git commit --amend //与上次commit合并, *B → C</span><br><span class="line">git push origin master //推送至master分支, C → D</span><br><span class="line">git pull //更新本地仓库至最新改动， D → A</span><br><span class="line">git fetch //抓取远程仓库更新， D → C</span><br><span class="line">git log //查看提交记录</span><br><span class="line">git status //查看修改状态</span><br><span class="line">git diff //查看详细修改内容</span><br><span class="line">git show //显示某次提交的内容</span><br></pre></td></tr></table></figure>
<h5 id="撤销操作"><a href="#撤销操作" class="headerlink" title="撤销操作"></a>撤销操作</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git reset &lt;file&gt;//某个文件索引会回滚到最后一次提交， C → B</span><br><span class="line">git reset//索引会回滚到最后一次提交， C → B</span><br><span class="line">git reset --hard // 索引会回滚到最后一次提交， C → B → A</span><br><span class="line">git checkout // 从index复制到workspace， B → A</span><br><span class="line">git checkout -- files // 文件从index复制到workspace，用来丢弃本地修改， B → A </span><br><span class="line">git checkout HEAD -- files // 文件从local repository复制到workspace， C → A</span><br></pre></td></tr></table></figure>
<h4 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b branch_name //创建名叫“branch_name”的分支，并切换过去</span><br><span class="line">git checkout master //切换回主分支</span><br><span class="line">git branch -d branch_name // 删除名叫“branch_name”的分支</span><br><span class="line">git push origin branch_name //推送分支到远端仓库</span><br><span class="line">git merge branch_name // 合并分支branch_name到当前分支(如master)</span><br><span class="line">git rebase //衍合，线性化的自动， D → A</span><br></pre></td></tr></table></figure>
<h5 id="冲突处理"><a href="#冲突处理" class="headerlink" title="冲突处理"></a>冲突处理</h5><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git diff //对比workspace与index</span><br><span class="line">git diff HEAD //对于workspace与最后一次commit</span><br><span class="line">git diff &lt;source_branch&gt; &lt;target_branch&gt; //对比差异</span><br><span class="line">git add &lt;filename&gt; //修改完冲突，需要add以标记合并成功</span><br></pre></td></tr></table></figure>
<h4 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h4><p>详细见<a href="">Git 笔记系列（五）—— Git常用命令-Reset</a><br><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/14936268028934.png" alt=""></p>
<p>重置命令（<code>git reset</code>）是<code>Git</code>最常用的命令之一，也是最危险，最容易误用的命令。来看看<code>git reset</code>命令的用法。</p>
<p>用法一：<code>git reset [-q] [&lt;commit&gt;] [--] &lt;paths&gt;...</code></p>
<p>用法二：<code>git reset [--soft | --mixed | --hard | --merge | --keep] [-q] [&lt;commit&gt;]</code></p>
<p>上面列出了两个用法，其中<code>&lt;commit&gt;</code>都是可选项，可以使用引用或者提交<code>ID</code>，如果省略 <code>&lt;commit&gt;</code>则相当于使用了<code>HEAD</code>的指向作为提交<code>ID</code>。<br>上面列出的两种用法的区别在于，第一种用法在命令中包含路径<code>&lt;paths&gt;</code>。为了避免路径和引用（或者提交<code>ID</code>）同名而冲突，可以在<code>&lt;paths&gt;</code>前用两个连续的短线（减号）作为分隔。</p>
<p>第一种用法（包含了路径<code>&lt;paths&gt;</code>的用法）不会重置引用，更不会改变工作区，而是用指定提交状态（<code>&lt;commit&gt;</code>）下的文件（<code>&lt;paths&gt;</code>）替换掉暂存区中的文件。例如命令<code>git reset HEAD &lt;paths&gt;</code>相当于取消之前执行的<code>git add &lt;paths&gt;</code>命令时改变的暂存区。</p>
<p>第二种用法（不使用路径<paths>的用法）则会重置引用。根据不同的选项，可以对暂存区或者工作区进行重置。参照下面的版本库模型图，来看一看不同的参数对第二种重置语法的影响。</paths></p>
<h4 id="git-reflog"><a href="#git-reflog" class="headerlink" title="git reflog"></a>git reflog</h4><p>如果没有记下重置前<code>master</code>分支指向的提交ID，想要重置回原来的提交真的是一件麻烦的事情（去对象库中一个一个地找）。幸好<code>Git</code>提供了一个挽救机制，通过.<code>git/logs</code>目录下日志文件记录了分支的变更。默认非裸版本库（带有工作区）都提供分支日志功能，这是因为带有工作区的版本库都有如下设置：</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git config core.logallrefupdates</span><br><span class="line">true</span><br></pre></td></tr></table></figure>
<p>查看一下<code>master</code>分支的日志文件<code>.git/logs/refs/heads/master</code>中的内容。下面命令显示了该文件的最后几行。为了排版的需要，还将输出中的40位的<code>SHA1</code>提交ID缩短形式。</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> tail -5 .git/logs/refs/heads/master</span><br><span class="line">dca47ab a0c641e Jiang Xin &lt;jiangxin@ossxp.com&gt; 1290999606 +0800    commit (amend): who does commit?</span><br><span class="line">a0c641e e695606 Jiang Xin &lt;jiangxin@ossxp.com&gt; 1291022581 +0800    commit: which version checked in?</span><br><span class="line">e695606 4902dc3 Jiang Xin &lt;jiangxin@ossxp.com&gt; 1291435985 +0800    commit: does master follow this new commit?</span><br><span class="line">4902dc3 e695606 Jiang Xin &lt;jiangxin@ossxp.com&gt; 1291436302 +0800    HEAD^: updating HEAD</span><br><span class="line">e695606 9e8a761 Jiang Xin &lt;jiangxin@ossxp.com&gt; 1291436382 +0800    9e8a761: updating HEAD</span><br></pre></td></tr></table></figure>
<p>可以看出这个文件记录了<code>master</code>分支指向的变迁，最新的改变追加到文件的末尾因此最后出现。最后一行可以看出因为执行了<code>git reset –hard</code>命令，指向的提交<code>ID</code>由<code>e695606</code>改变为<code>9e8a761</code>。<br><code>Git</code>提供了一个<code>git reflog</code>命令，对这个文件进行操作。使用<code>show</code>子命令可以显示此文件的内容。</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git reflog show master | head -5</span><br><span class="line">9e8a761 master@&#123;0&#125;: 9e8a761: updating HEAD</span><br><span class="line">e695606 master@&#123;1&#125;: HEAD^: updating HEAD</span><br><span class="line">4902dc3 master@&#123;2&#125;: commit: does master follow this new commit?</span><br><span class="line">e695606 master@&#123;3&#125;: commit: which version checked in?</span><br><span class="line">a0c641e master@&#123;4&#125;: commit (amend): who does commit?</span><br></pre></td></tr></table></figure>
<p>使用<code>git reflog</code>的输出和直接查看日志文件最大的不同在于显示顺序的不同，即最新改变放在了最前面显示，而且只显示每次改变的最终的<code>SHA1</code>哈希值。还有个重要的区别在于使用<code>git reflog</code>的输出中还提供一个方便易记的表达式：<code>&lt;refname&gt;@{&lt;n&gt;}</code>。这个表达式的含义是引用<code>&lt;refname&gt;</code>之前第<code>&lt;n&gt;</code>次改变时的<code>SHA1</code>哈希值。<br>那么将引用<code>master</code>切换到两次变更之前的值，可以使用下面的命令。<br>重置<code>master</code>为两次改变之前的值。</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git reset --hard master@&#123;2&#125;</span><br></pre></td></tr></table></figure>
<p><code>HEAD is now at 4902dc3 does master follow this new commit?</code></p>
<p>重置后工作区中文件<code>new-commit.txt</code>又回来了。</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> ls </span><br><span class="line">new-commit.txt  welcome.txt</span><br></pre></td></tr></table></figure>
<p>提交历史也回来了。</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git log --oneline</span><br><span class="line">4902dc3 does master follow this new commit?</span><br><span class="line">e695606 which version checked in?</span><br><span class="line">a0c641e who does commit?</span><br><span class="line">9e8a761 initialized.</span><br></pre></td></tr></table></figure>
<p>此时如果再用<code>git reflog</code>查看，会看到恢复master的操作也记录在日志中了。</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git reflog show master | head -5</span><br><span class="line">4902dc3 master@&#123;0&#125;: master@&#123;2&#125;: updating HEAD</span><br><span class="line">9e8a761 master@&#123;1&#125;: 9e8a761: updating HEAD</span><br><span class="line">e695606 master@&#123;2&#125;: HEAD^: updating HEAD</span><br><span class="line">4902dc3 master@&#123;3&#125;: commit: does master follow this new commit?</span><br><span class="line">e695606 master@&#123;4&#125;: commit: which version checked in?</span><br></pre></td></tr></table></figure>
<h4 id="git-remote"><a href="#git-remote" class="headerlink" title="git remote"></a>git remote</h4><ol>
<li>添加远程库： <code>$ git remote add origin</code></li>
<li>移除远程库： <code>$ git remote remove (OrignName)</code></li>
<li>查看远程库： <code>$ git remote -v</code>(–verbose)</li>
</ol>
<h4 id="git-grep查找"><a href="#git-grep查找" class="headerlink" title="git grep查找"></a>git grep查找</h4><p><code>git grep -n &quot;要查找的字符串&quot;</code></p>
<ol>
<li>-W 查找函数上下文</li>
<li><p>使用 –count 参数, 只会显示在哪个文件里有几个要查找的字符串, 如下:<br><code>git grep --count &quot;(defun format &quot;</code></p>
<p><code>src/format.lisp:1</code></p>
</li>
</ol>
<p>可以使用 <code>$ git help grep</code> 来查看帮助</p>
<h2 id="Git-其他常用命令"><a href="#Git-其他常用命令" class="headerlink" title="Git 其他常用命令"></a>Git 其他常用命令</h2><h3 id="Git-undo撤销方法"><a href="#Git-undo撤销方法" class="headerlink" title="Git undo撤销方法"></a>Git undo撤销方法</h3><ol>
<li><code>git revert &lt;SHA&gt;</code></li>
<li><code>git commit --amend -m &quot;Modify last add message&quot;</code></li>
<li>撤销本地的修改<code>git checkout -- &lt;bad filename&gt;</code></li>
<li>重置本地的修改<code>git reset &lt;last good SHA&gt;</code></li>
</ol>
<p><a href="https://tonydeng.github.io/2015/07/08/how-to-undo-almost-anything-with-git/" target="_blank" rel="noopener">Git的各种Undo技巧</a></p>
<h3 id="Git-Merge"><a href="#Git-Merge" class="headerlink" title="Git Merge"></a>Git Merge</h3><p>使用<code>Xcode</code>的<code>FileMerge</code>合并代码</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> Tell system when Xcode utilities live:</span><br><span class="line">sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Set "opendiff" as the default mergetool globally:</span><br><span class="line">git config --global merge.tool opendiff</span><br></pre></td></tr></table></figure>
<ol>
<li>代码冲突<code>! [rejected] master -&gt; master (non-fast-forward)</code>的原因以及解决办法：</li>
</ol>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> ! [rejected]        master -&gt;  master (non-fast-forward)  </span><br><span class="line">error: failed to push some refs to 'git@github.com:archermind/LEDTorch.apk-for-Android.git'  </span><br><span class="line">To prevent you from losing history, non-fast-forward updates were rejected  </span><br><span class="line">Merge the remote changes before pushing again.  See the 'Note about  </span><br><span class="line">fast-forwards' section of 'git push --help' for details.</span><br></pre></td></tr></table></figure>
<p><strong>操作命令：</strong></p>
<ul>
<li>正确的做法是，在<code>push</code>之前<code>git fetch origin</code>，将<code>github</code>上的新代码拉下来，然后在本地<code>merge</code>，如果没有冲突就可以push了，如果有冲突的话要在本地解决冲突后，再<code>pus</code>h。具体做法就是：</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin</span><br><span class="line">git merge origin (master)</span><br></pre></td></tr></table></figure>
<ul>
<li>这两步其实可以简化为</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin master</span><br></pre></td></tr></table></figure>
<p><code>git-fetch - Download objects and refs from another repository</code><br><code>git-merge - Join two or more development histories together</code></p>
<h3 id="Git-log"><a href="#Git-log" class="headerlink" title="Git log"></a>Git log</h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">Table 3. 限制 git log 输出的选项</span><br><span class="line">选项	说明</span><br><span class="line">-(n)</span><br><span class="line"></span><br><span class="line">仅显示最近的 n 条提交</span><br><span class="line"></span><br><span class="line">--since, --after</span><br><span class="line"></span><br><span class="line">仅显示指定时间之后的提交。</span><br><span class="line"></span><br><span class="line">--until, --before</span><br><span class="line"></span><br><span class="line">仅显示指定时间之前的提交。</span><br><span class="line"></span><br><span class="line">--author</span><br><span class="line"></span><br><span class="line">仅显示指定作者相关的提交。</span><br><span class="line"></span><br><span class="line">--committer</span><br><span class="line"></span><br><span class="line">仅显示指定提交者相关的提交。</span><br><span class="line"></span><br><span class="line">--grep</span><br><span class="line"></span><br><span class="line">仅显示含指定关键字的提交</span><br><span class="line"></span><br><span class="line">-S</span><br><span class="line"></span><br><span class="line">仅显示添加或移除了某个关键字的提交</span><br><span class="line"></span><br><span class="line">来看一个实际的例子，如果要查看 Git 仓库中，2008 年 10 月期间，Junio Hamano 提交的但未合并的测试文件，可以用下面的查询命令：</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> git log --pretty="%h - %s" --author=gitster --since="2008-10-01" \</span><br><span class="line">   --before="2008-11-01" --no-merges -- t/</span><br><span class="line">5610e3b - Fix testcase failure when extended attributes are in use</span><br><span class="line">acd3b9e - Enhance hold_lock_file_for_&#123;update,append&#125;() API</span><br><span class="line">f563754 - demonstrate breakage of detached checkout with symbolic link HEAD</span><br><span class="line">d1a43f2 - reset --hard/read-tree --reset -u: remove unmerged new paths</span><br><span class="line">51a94af - Fix "checkout --track -b newbranch" on detached HEAD</span><br><span class="line">b0ad11e - pull: allow "git pull origin $something:$current_branch" into an unborn branch</span><br><span class="line">在近 40000 条提交中，上面的输出仅列出了符合条件的 6 条记录。</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>显示每次提交的diff:</li>
</ol>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log -p</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>按成员的提交历史</li>
</ol>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git shortlog</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>在提交的历史改动中查找关键字，<code>-p</code>代表显示log提交的改动</li>
</ol>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log -S"searchKeyWord" -p</span><br></pre></td></tr></table></figure>
<p>5, 搜索提交的注释</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --grep=“keyWord”</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>搜索某个用户的提交</li>
</ol>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --author=“authorName”</span><br></pre></td></tr></table></figure>
<h3 id="Git-diff"><a href="#Git-diff" class="headerlink" title="Git diff"></a>Git diff</h3><p>通过使用不同的参数调用<code>git diff</code>命令，可以对工作区、暂存区、<code>HEAD</code>中的内容两两比较。下面的这个图，展示了不同的git diff命令的作用范围。</p>
<p><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/14936265400329.png" alt=""></p>
<p><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/15187660224172.jpg" alt=""><br>diff: 分支点之间的变化<br>分支点的继承<br>当add了change后, <code>git diff</code>是不会显示已经add后的change的，可以制定stage的diff</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --staged</span><br></pre></td></tr></table></figure>
<h4 id="Git-比较不同版本文件差异的常用命令格式："><a href="#Git-比较不同版本文件差异的常用命令格式：" class="headerlink" title="Git 比较不同版本文件差异的常用命令格式："></a>Git 比较不同版本文件差异的常用命令格式：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">git diff                                       查看尚未暂存的文件更新了哪些部分</span><br><span class="line"></span><br><span class="line">git diff filename 查看尚未暂存的某个文件更新了哪些</span><br><span class="line"></span><br><span class="line">git diff –cached                    查看已经暂存起来的文件和上次提交的版本之间的差异</span><br><span class="line"></span><br><span class="line">git diff –cached filename 查看已经暂存起来的某个文件和上次提交的版本之间的差异</span><br><span class="line"></span><br><span class="line">git diff ffd98b291e0caa6c33575c1ef465eae661ce40c9 b8e7b00c02b95b320f14b625663fdecf2d63e74c 查看某两个版本之间的差异</span><br><span class="line"></span><br><span class="line">git diff ffd98b291e0caa6c33575c1ef465eae661ce40c9:filename b8e7b00c02b95b320f14b625663fdecf2d63e74c:filename 查看某两个版本的某个文件之间的差异</span><br></pre></td></tr></table></figure>
<h3 id="Git-config"><a href="#Git-config" class="headerlink" title="Git config"></a>Git config</h3><p>Git的配置</p>
<ol>
<li>列出<code>Git</code>全局配置列表</li>
</ol>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global --list</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>列出<code>Git</code>本地仓库配置列表</li>
</ol>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --local --list</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>设置用户名，邮箱密码等 </li>
</ol>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git config --global user.name "John Doe"</span><br><span class="line"><span class="meta">$</span> git config --global user.email johndoe@example.com</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>设置编辑器</li>
</ol>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git config --global core.editor emacs</span><br></pre></td></tr></table></figure>
<h4 id="设置git命令-别名"><a href="#设置git命令-别名" class="headerlink" title="设置git命令 别名"></a>设置<code>git</code>命令 别名</h4><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git config --global alias.st status</span><br><span class="line"><span class="meta">$</span> git config --global alias.co checkout</span><br><span class="line"><span class="meta">$</span> git config --global alias.ct commit</span><br><span class="line"><span class="meta">$</span> git config --global alias.df diff</span><br><span class="line"><span class="meta">$</span> git config --global alias.br branch</span><br><span class="line"><span class="meta">#</span>git lg to view commit log like network graph</span><br><span class="line"><span class="meta">$</span> git config --global alias.lg "log --all --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%ci) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit"</span><br></pre></td></tr></table></figure>
<h5 id="Git命令的别名"><a href="#Git命令的别名" class="headerlink" title="Git命令的别名"></a>Git命令的别名</h5><p>有些<code>Git</code>的命令很长，如果经常输入就很繁琐，通过设置<code>Git</code>的别名，可以简化输入，提交效率，这里推荐一个<code>Git</code>的别名库，方便使用各种<code>Git</code>命令。<br><a href="https://github.com/tj/git-extras" target="_blank" rel="noopener"></a><br><a href="https://github.com/tj/git-extras/blob/master/Commands.md" target="_blank" rel="noopener">git-extras/Commands.md at master · tj/git-extras</a>GIT utilities – repo summary, repl, changelog population, author commit percentages and more</p>
<h4 id="同一台电脑可以有2个git账号（不同网站的）"><a href="#同一台电脑可以有2个git账号（不同网站的）" class="headerlink" title="同一台电脑可以有2个git账号（不同网站的）"></a>同一台电脑可以有2个git账号（不同网站的）</h4><p><a href="https://gist.github.com/suziewong/4378434" target="_blank" rel="noopener">1.同一台电脑可以有2个git账号（不同网站的）</a></p>
<p>这种情况下，需要几点注意</p>
<p>1.<code>remote pull push</code>的时候有问题，因为要设置邮箱问题了 pull的时候识别的是邮箱，2个github账号，2个邮箱，我们自然不能使用global的user.email了</p>
<p>1.取消global</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global --unset user.name</span><br><span class="line">git config --global --unset user.email</span><br></pre></td></tr></table></figure>
<p>2.设置每个项目repo的自己的<code>user.email</code></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config  user.email "xxxx@xx.com"</span><br><span class="line">git config  user.name "suzie"</span><br></pre></td></tr></table></figure>
<p>之后<code>push pull</code>就木有问题了</p>
<p>备注<br>生成ssh key</p>
<p><code>ssh-keygen -m rsa -C &quot;your mail</code> （当前目录） 然后可以命名默认<code>id_rsa</code>或者<code>id_rsa_second</code> 把对应的pub放到公共服务器上。</p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gitk //开灯图形化git</span><br><span class="line">git config color.ui true //彩色的 git 输出</span><br><span class="line">git config format.pretty oneline //显示历史记录时，每个提交的信息只显示一行</span><br><span class="line">git add -i //交互式添加文件到暂存区</span><br></pre></td></tr></table></figure>
<h3 id="常见命令菜单"><a href="#常见命令菜单" class="headerlink" title="常见命令菜单"></a>常见命令菜单</h3><h4 id="Git-Cheat-Sheet-Part1"><a href="#Git-Cheat-Sheet-Part1" class="headerlink" title="Git Cheat Sheet Part1"></a>Git Cheat Sheet Part1</h4><p>看了前面那么多命令，是不是有点多了？ㄟ( ▔, ▔ )ㄏ平时开发用的到那么多命令吗？Don`t worry，常用的命令只需看下面几张图即可：</p>
<p><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/2017-07-12-14998489359095.jpg" alt="Git Cheat Sheet"></p>
<h4 id="Git-Cheet-Sheet-Part2"><a href="#Git-Cheet-Sheet-Part2" class="headerlink" title="Git Cheet Sheet Part2"></a>Git Cheet Sheet Part2</h4><p><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/15195348554810.png" alt=""><br><img src="http://pic-mike.oss-cn-hongkong.aliyuncs.com/qiniu/15195348678675.jpg" alt=""></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="https://www.cnblogs.com/kidsitcn/p/4513297.html" target="_blank" rel="noopener">git reset soft,hard,mixed之区别深解</a></li>
<li><a href="https://git-scm.com/docs/git-reset" target="_blank" rel="noopener">Git - git-reset Documentation</a></li>
</ol>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">FrizzleFur</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://frizzlefur.com/2018/02/28/Git 笔记系列（三）—— Git常用命令-一览/">http://frizzlefur.com/2018/02/28/Git 笔记系列（三）—— Git常用命令-一览/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://frizzlefur.com">FFur</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Git/">Git</a></div><div class="post-qr-code"><div class="post-qr-code-item"><img class="post-qr-code__img" src="https://pic-mike.oss-cn-hongkong.aliyuncs.com/Blog/avatar.png"><div class="post-qr-code__desc">我要吐槽下</div></div></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2018/02/28/Git 笔记系列（四）—— Git常用命令-Checkout/"><i class="fa fa-chevron-left">  </i><span>Git 笔记系列（四）—— Git常用命令-Checkout</span></a></div><div class="next-post pull-right"><a href="/2018/02/28/Git 笔记系列（二）—— Git工作流程/"><span>Git 笔记系列（二）—— Git工作流程</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="lv-container" data-id="city" data-uid="Mi8xLzM"><script>(function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
})(document, 'script');</script></div></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2017 - 2019 By FrizzleFur</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">Hi, this is just a small place for reflect.</div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.6"></script><script src="/js/fancybox.js?version=1.5.6"></script><script src="/js/sidebar.js?version=1.5.6"></script><script src="/js/copy.js?version=1.5.6"></script><script src="/js/fireworks.js?version=1.5.6"></script><script src="/js/transition.js?version=1.5.6"></script><script src="/js/scroll.js?version=1.5.6"></script><script src="/js/head.js?version=1.5.6"></script></body></html>